FROM archlinux
LABEL maintainer="openssh service on archlinux"

# Installation des pr√©requis
RUN pacman -Syu --noconfirm && \
        pacman -S --noconfirm openssh {{PACKAGES}} && \
        ssh-keygen -A

# Creating ssh user
USER root
RUN useradd -m -s "/bin/bash" {{USERNAME}} && printf '{{PASSWORD}}\n{{PASSWORD}}\n' | passwd {{USERNAME}}


WORKDIR /ssh-service
EXPOSE 22
STOPSIGNAL SIGTERM
CMD ["/usr/sbin/sshd", "-D"]
